var index=function(e){function t(t){for(var n,o,s=t[0],l=t[1],c=t[2],u=0,f=[];u<s.length;u++)o=s[u],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&f.push(i[o][0]),i[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);for(h&&h(t);f.length;)f.shift()();return a.push.apply(a,c||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],n=!0,s=1;s<r.length;s++){var l=r[s];0!==i[l]&&(n=!1)}n&&(a.splice(t--,1),e=o(o.s=r[0]))}return e}var n={},i={0:0},a=[];function o(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/assets/js/";var s=window.webpackJsonp_name_=window.webpackJsonp_name_||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var h=l;return a.push([52,1]),r()}({52:function(e,t,r){e.exports=r(92)},53:function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},92:function(e,t,r){"use strict";r.r(t);r(28),r(65),r(43),r(73),r(74),r(77),r(79),r(46),r(85),r(86),r(88),r(51);function n(e,t,r){return(n=i()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&a(i,r.prototype),i}).apply(null,arguments)}function i(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function(){function e(e,t,r,n){var i,a,o;void 0===n&&(n="400px"),o={startIndex:0,endIndex:0},(a="cache")in(i=this)?Object.defineProperty(i,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):i[a]=o,this.dataProvider=e,this.element=t,this.rowTemplate=r,this.height=n,this.init()}var t,r,i,a=e.prototype;return a.init=function(){if(!this.element.dataset.inited){for(var e=[];this.scroller.offsetHeight>=this.rowHeight*e.length;)e.push(this.parseTemplate(this.dataProvider.getOne(e.length),e.length)),this.element.innerHTML=e.join("");this.setWrapperHeight(),this.initEvents(),this.element.dataset.inited="true"}},a.initEvents=function(){var e=this;if(!this.element.dataset.inited){this.scroller.addEventListener("scroll",(function(){var t=e.scrollerStartIndex,r=e.scrollerEndIndex,n=e.cache,i=n.startIndex,a=n.endIndex;if(i>t||a<r){var o=e.startIndex,s=e.endIndex;e.cache.startIndex=o,e.cache.endIndex=s,e.renderRows(s-o,o),e.setTablePosition()}}))}},a.setWrapperHeight=function(){var e=this.fullHeight;e>8e6&&(e=8e6),this.wrapper.style.height=e+"px"},a.setTablePosition=function(){var e=this.startIndex*this.rowHeight/this.ratio;this.table.style.transform="translateY("+e+"px)"},a.renderRows=function(e,t){var r=this,n=[];this.dataProvider.getList(e,t).forEach((function(e,i){n.push(r.parseTemplate(e,t+i))})),this.element.innerHTML=n.join("")},a.parseTemplate=function(e,t){var r=this.rowTemplate,i=Object.keys(e),a=Object.values(e);return i.push("num"),a.push(t+1),n(Function,i.concat(["return `"+r+"`;"])).apply(void 0,a)},t=e,(r=[{key:"table",get:function(){return this.element.closest("table")}},{key:"wrapper",get:function(){var e=this.element.closest("[data-lazy-table-wrapper]");return e||(e=document.createElement("div"),this.table.parentNode.insertBefore(e,this.table),e.appendChild(this.table),e.dataset.lazyTableWrapper="true"),e}},{key:"scroller",get:function(){var e=this.element.closest("[data-lazy-table-scroller]");return e||(e=document.createElement("div"),this.wrapper.parentNode.insertBefore(e,this.wrapper),e.appendChild(this.wrapper),e.dataset.lazyTableScroller="true",e.style.overflowY="scroll",e.style.height=this.height),e}},{key:"spaceSize",get:function(){if(void 0===this.cache.spaceSize){var e=window.getComputedStyle(this.table),t=e.getPropertyValue("border-collapse"),r=e.getPropertyValue("border-spacing").split(" ")[1],n=parseFloat(r.replace(/[^\d.]/g,""));this.cache.spaceSize=0,"separate"===t&&(this.cache.spaceSize=n)}return this.cache.spaceSize}},{key:"ratio",get:function(){return this.fullHeight/this.wrapper.offsetHeight}},{key:"fullHeight",get:function(){return this.dataProvider.total*this.rowHeight}},{key:"rowHeight",get:function(){if(void 0===this.cache.rowHeight||0===this.cache.rowHeight){var e=this.element.querySelector("tr");this.cache.rowHeight=e?e.offsetHeight+this.spaceSize:0}return this.cache.rowHeight}},{key:"scrollTop",get:function(){return this.scroller.scrollTop*this.ratio}},{key:"maxStartIndex",get:function(){return this.cache.maxStartIndex||(this.cache.maxStartIndex=Math.round(this.dataProvider.total-this.scrollerRowsSize)),this.cache.maxStartIndex}},{key:"scrollerRowsSize",get:function(){return Math.round(this.scroller.offsetHeight/this.rowHeight)}},{key:"scrollerStartIndex",get:function(){var e=this.rowHeight?Math.floor(this.scrollTop/this.rowHeight):0;return e<0&&(e=0),e>this.maxStartIndex&&(e=this.maxStartIndex),e}},{key:"scrollerEndIndex",get:function(){var e=this.scrollerStartIndex+this.scrollerRowsSize;return e>this.dataProvider.total?this.dataProvider.total:e}},{key:"startIndex",get:function(){var e=this.scrollerStartIndex-this.scrollerRowsSize;return e<0?0:e}},{key:"endIndex",get:function(){var e=this.scrollerEndIndex+this.scrollerRowsSize;return e>this.dataProvider.total?this.dataProvider.total:e}}])&&o(t.prototype,r),i&&o(t,i),e}();function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e){this.message=e}var u=function(){function e(e,t,r){c(this,"items",[]),c(this,"fields",[]),c(this,"samples",{}),t.forEach((function(e){if(!r[e])throw new h("Field "+e+" isn`t presented in samples")})),this.items[e-1]=void 0,this.fields=t,this.samples=r}var t,r,n,i=e.prototype;return i.getOne=function(e){return this.items[e]||(this.items[e]=this.generateFakeData()),this.items[e]},i.getList=function(e,t){void 0===e&&(e=10),void 0===t&&(t=0);var r=[],n=e+t;n>this.total&&(n=this.total);for(var i=t;i<n;i+=1)this.items[i]||(this.items[i]=this.generateFakeData()),r.push(this.items[i]);return r},i.generateFakeData=function(){for(var e={},t=0,r=this.fields.length;t<r;t+=1){var n=this.fields[t],i=Math.floor(Math.random()*this.samples[n].length);e[n]=this.samples[n][i]}return e},t=e,(r=[{key:"total",get:function(){return this.items.length}}])&&l(t.prototype,r),n&&l(t,n),e}(),f={count:1e7,samples:{name:["Александр","Василий","Пётр","Степан","Иван","Алексей","Сергей","Дмитрий"],fathername:["Александрович","Васильевич","Петрович","Степанович","Иванович","Алексеевич","Сергеевич","Дмитриевич"],surname:["Александров","Васильев","Петров","Степанов","Иванов","Алексеев","Сергеев","Дмитриев"]}};document.addEventListener("DOMContentLoaded",(function(){var e=f.samples,t=new u(f.count,Object.keys(e),e),r=document.getElementById("row-template").innerHTML;new s(t,document.querySelector('[data-id="lazy-table"]'),r,"400px")}))}});